<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TaskHub</title>

<style>
body{
 font-family:Arial;
 background:#0f172a;
 color:white;
 text-align:center;
}

.box{
 background:#1e293b;
 padding:25px;
 margin:30px auto;
 width:360px;
 border-radius:12px;
 box-shadow:0 0 20px #0005;
}

button{
 padding:10px;
 margin:6px;
 border:none;
 border-radius:8px;
 background:#22c55e;
 color:white;
 cursor:pointer;
 font-weight:bold;
}

button:hover{
 background:#16a34a;
}

input{
 padding:10px;
 margin:6px;
 width:90%;
 border-radius:6px;
 border:none;
}

.logout{
 background:#ef4444;
}
</style>
</head>

<body>

<h1>ğŸ’° TaskHub</h1>

<!-- LOGIN -->
<div id="auth" class="box">
<h3>ÄÄƒng kÃ½ / ÄÄƒng nháº­p</h3>

<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">

<br>
<button onclick="register()">ÄÄƒng kÃ½</button>
<button onclick="login()">ÄÄƒng nháº­p</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="box" style="display:none">

<h3>Xin chÃ o <span id="name" style="color:#22c55e"></span> ğŸ‘‹</h3>

<p>Sá»‘ dÆ°: <b id="money">0</b>Ä‘</p>

<button onclick="taoTask()">ğŸ§© LÃ m nhiá»‡m vá»¥</button>
<button onclick="rutTien()">ğŸ’¸ RÃºt tiá»n</button>
<button class="logout" onclick="logout()">ÄÄƒng xuáº¥t</button>

<p id="status"></p>

</div>

<script>

/* ================= AUTH ================= */

function register(){
 let u=user.value.trim();
 let p=pass.value.trim();

 if(!u||!p) return alert("Nháº­p Ä‘á»§ thÃ´ng tin");

 localStorage.setItem("acc_"+u,p);
 alert("ÄÄƒng kÃ½ thÃ nh cÃ´ng");
}

function login(){
 let u=user.value;
 let p=pass.value;

 if(localStorage.getItem("acc_"+u)==p){
   localStorage.setItem("login",u);
   start();
 }else alert("Sai tÃ i khoáº£n");
}

function logout(){
 localStorage.removeItem("login");
 location.reload();
}

function start(){
 let u=localStorage.getItem("login");
 if(!u) return;

 auth.style.display="none";
 dashboard.style.display="block";

 name.innerText=u;
 money.innerText=
 localStorage.getItem("money_"+u)||0;
}
start();

/* ================= TASK ================= */

async function taoTask(){

 let user = localStorage.getItem("login");
 if(!user) return alert("ChÆ°a Ä‘Äƒng nháº­p");

 status.innerText="Äang táº¡o nhiá»‡m vá»¥...";

 // âœ… LINK TASK Cá»¦A CHÃNH WEB
 let taskLink =
 location.origin +
 "/task.html?user="+user;

 try{

   let res = await fetch(
     "/api/short?url="+encodeURIComponent(taskLink)
   );

   let data = await res.json();

   if(!data.short){
     status.innerText="API lá»—i";
     return;
   }

   status.innerText="Äang má»Ÿ nhiá»‡m vá»¥...";

   // âœ… Má» YEUMONEY
   window.open(data.short,"_blank");

 }catch{
   status.innerText="Server lá»—i";
 }

}

/* ================= RÃšT TIá»€N ================= */

function rutTien(){
 window.open(
 "https://www.facebook.com/profile.php?id=61555922620631",
 "_blank"
 );
}

</script>

</body>
</html>
